{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <title>Cadastro</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{% static 'usuarios/css/cadastro.css' %}">
</head>

<body>

{% if messages %}
    <div class="mensagens-container">
        {% for message in messages %}
            <div class="mensagem-popup {{ message.tags }}" onclick="this.remove()">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}


    
  <form action="{% url 'cadastro' %}" method="POST"> {% csrf_token %}

    <h2 class="titulo-cadastro">Uni Bank</h2>
        
        {{ form.username }}
        {% for error in form.username.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}
        
        {{ form.email }}
        {% for error in form.email.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}
        
        {{ form.telefone }}
        {% for error in form.telefone.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}

            <div class="input-senha-container">
                  {{ form.senha }}
      <span class="ver-senha" onclick="toggleSenha()">üëÅ</span>
    </div>
        {% for error in form.senha.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}

            <div class="input-senha-container">
                  {{ form.senha_confirmacao }}
      <span class="ver-senha" onclick="toggleConfirmacaoSenha()">üëÅ</span>
    </div>
        {% for error in form.senha_confirmacao.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}


    <button type="submit">Cadastrar</button>

    <p class="login-texto">
      J√° faz parte da nossa comunidade?
      <a href="{% url 'login' %}">Logar</a>
    </p>

  </form>

  <script>
        // 1. Alterna o campo Senha
    function toggleSenha() {
      let campo = document.getElementById("senha");
      campo.type = campo.type === "password" ? "text" : "password";
    }

        // 2. Novo: Alterna o campo Confirma√ß√£o de Senha
        function toggleConfirmacaoSenha() {
      let campo = document.getElementById("confirmacao_senha");
      campo.type = campo.type === "password" ? "text" : "password";
    }

    // C√ìDIGO DE GERENCIAMENTO DE MENSAGENS POP-UP
    document.addEventListener('DOMContentLoaded', () => {
      const mensagens = document.querySelectorAll('.mensagem-popup');
      
      mensagens.forEach(mensagem => {
        // 1. Auto-fechamento ap√≥s 5 segundos
        setTimeout(() => {
          mensagem.style.opacity = '0'; 
          setTimeout(() => {
            mensagem.remove();
          }, 500); 
        }, 5000); 

        // 2. Fechamento ao clicar na mensagem
        mensagem.addEventListener('click', () => {
          mensagem.style.opacity = '0';
          setTimeout(() => {
            mensagem.remove();
          }, 500);
        });
      });
    });
  </script>
  

</body>
</html>