{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <title>Login</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="{% static 'usuarios/css/login.css' %}">
</head>

<body>

{% if messages %}
    <div class="mensagens-container">
        {% for message in messages %}
            <!-- O .tags do Django ser√° 'success', 'error', 'warning', etc. -->
            <div class="mensagem-popup {{ message.tags }}" onclick="this.classList.add('hidden')">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}


  <form action="{% url 'login' %}" method="POST">{% csrf_token %}

    <h2 class="titulo-login">Uni Bank</h2>

            {{ form.username }}
        {% for error in form.username.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}

            <div class="input-senha-container">
                  {{ form.password }} 
      <span class="ver-senha" onclick="toggleSenhaLogin()">üëÅ</span>
    </div>
        {% for error in form.password.errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}
        
        {% for error in form.non_field_errors %}
            <p class="mensagem-erro">{{ error }}</p> 
        {% endfor %}

    <button type="submit">Logar</button>

    <p class="cadastro-texto">
      Ainda n√£o tem uma conta?
      <a href="{% url 'cadastro' %}">Cadastre-se</a>
    </p>

  </form>

  <script>
        // FUN√á√ÉO ATUALIZADA para usar o ID do input de login (senha_login)
    function toggleSenhaLogin() {
      let campo = document.getElementById("senha_login");
      campo.type = campo.type === "password" ? "text" : "password";
    }
        
    // C√ìDIGO: Gerenciamento de Mensagens Pop-up (Mantido)
    document.addEventListener('DOMContentLoaded', () => {
      const mensagens = document.querySelectorAll('.mensagem-popup');
      
      mensagens.forEach(mensagem => {
        // 1. Auto-fechamento ap√≥s 5 segundos
        setTimeout(() => {
          mensagem.style.opacity = '0'; 
          
          // Remove o elemento ap√≥s a transi√ß√£o terminar (500ms)
          setTimeout(() => {
            mensagem.remove();
          }, 500); 
        }, 5000); // 5000ms = 5 segundos

        // 2. Fechamento ao clicar na mensagem
        mensagem.addEventListener('click', () => {
          mensagem.style.opacity = '0';
          setTimeout(() => {
            mensagem.remove();
          }, 500);
        });
      });
    });
  </script>

</body>
</html>